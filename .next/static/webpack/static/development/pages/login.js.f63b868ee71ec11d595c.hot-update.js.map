{"version":3,"file":"static/webpack/static/development/pages/login.js.f63b868ee71ec11d595c.hot-update.js","sources":["webpack:///./pages/login.js"],"sourcesContent":["import { Component } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport Head from \"next/head\";\n\nimport { Router } from \"../routes\";\nimport { Link } from \"../components/Link\";\n// import Layout from \"../components/Layout\";\nimport Input from \"../components/Input\";\nimport Button from \"../components/Button\";\n// import { Title, Body } from \"../components/Text\";\nimport config from \"../config\";\n// import { TouchLogin } from \"../components/Login\";\n\nconst LoginContainer = styled.div`\n  margin: auto;\n  width: 500px;\n  padding-top: 80px;\n`;\n\nexport default class Signup extends Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    passwordVerification: \"\",\n    submitting: false,\n    tips: {}\n  };\n  login = async () => {\n    const { checkAuth, submitting } = this.props;\n    const { email, password } = this.state;\n    if (submitting) {\n      return false;\n    }\n    if (email.length === 0 && password.length === 0) {\n      return false;\n    }\n    this.setState({ submitting: true });\n    const tips = {};\n    const response = await axios({\n      url: config.api.host + \"/auth\",\n      method: \"POST\",\n      data: { email, password },\n      withCredentials: true\n    });\n    this.setState({ submitting: false });\n    if (!response.data.error) {\n      await checkAuth();\n      Router.pushRoute(\"dashboard\");\n    } else {\n      if (response.data.error === \"not_registered\") {\n        tips.email = \"Seems like you have the wrong email?\";\n      }\n      if (response.data.error === \"incorrect_password\") {\n        tips.password = \"You've got the password wrong\";\n      }\n      if (response.data.error === \"not_verified\") {\n        tips.email = \"Looks like you haven't confirmed your email...\";\n      }\n    }\n    this.setState({\n      tips\n    });\n    console.log(response);\n  };\n\n  onChangeEmail = ev => {\n    this.setState({ email: ev.target.value });\n  };\n  onChangePassword = ev => {\n    this.setState({ password: ev.target.value });\n  };\n  onKeyDown = event => {\n    if (event && event.key === \"Enter\") {\n      event.preventDefault();\n      event.stopPropagation();\n      this.login();\n    }\n  };\n  render() {\n    const { auth, user, isTouch } = this.props;\n\n    if (auth) {\n      Router.pushRoute(\"dashboard\");\n    }\n\n    const { email, password, submitting, tips } = this.state;\n    return (\n    //   <Layout auth={auth} user={user} isTouch={isTouch}>\n    //     <Head>\n    //       <title>Login - Jaresume</title>\n    //     </Head>\n    //     {isTouch && (\n    //       <TouchLogin\n    //         email={email}\n    //         password={password}\n    //         submitting={submitting}\n    //         tips={tips}\n    //         onChangeEmail={this.onChangeEmail}\n    //         onChangePassword={this.onChangePassword}\n    //         login={this.login}\n    //         onKeyDown={this.onKeyDown}\n    //       />\n    //     )}\n    //     {!isTouch && (\n          <LoginContainer onKeyDown={this.onKeyDown}>\n            <form>\n              <br />\n              <br />\n              <Title>Login</Title>\n              <br />\n              <br />\n              <Input\n                label=\"Email\"\n                subLabel={tips.email}\n                type=\"email\"\n                onChange={this.onChangeEmail}\n                value={email}\n              />\n              <Input\n                type=\"password\"\n                label=\"Password\"\n                subLabel={tips.password}\n                onChange={this.onChangePassword}\n                value={password}\n              />\n              <Button disabled={submitting} onClick={this.login}>\n                Login\n              </Button>\n            </form>\n\n            <br />\n            <p>\n              {/* Don't have an account? <Link href=\"/signup\">signup</Link> */}\n            </p>\n            <p>\n              {/* Forgot your password? <Link to=\"forgot_password\">reset</Link> */}\n            </p>\n          </LoginContainer>\n    //     )}\n    //   </Layout>\n    );\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAKA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAMA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AASA;AAAA;AAAA;AACA;AAAA;AAVA;AAAA;AAYA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAJA;AACA;AAZA;AAWA;AACA;AAKA;AAAA;AAAA;AACA;AAlBA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAoBA;AApBA;AAAA;AACA;AADA;AAsBA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AA/BA;AAgCA;AACA;AADA;AACA;AAEA;AACA;AApCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAqCA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAQA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAtDA;AAuDA;;;;AA1HA;AACA;;;;;A","sourceRoot":""}
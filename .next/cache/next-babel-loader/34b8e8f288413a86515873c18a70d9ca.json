{"ast":null,"code":"var _jsxFileName = \"/home/roland/repos/learn2spell-app/pages/login.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Component } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport Head from \"next/head\";\nimport { Router } from \"../routes\";\nimport { Link } from \"../components/Link\";\nimport Layout from \"../components/Layout\";\nimport Input from \"../components/Input\";\nimport Button from \"../components/Button\";\nimport { Title, Body } from \"../components/Text\";\nimport config from \"../config\";\nimport { TouchLogin } from \"../components/Login\";\nconst LoginContainer = styled.div`\n  margin: auto;\n  width: 500px;\n  padding-top: 80px;\n`;\nexport default class Signup extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      email: \"\",\n      password: \"\",\n      passwordVerification: \"\",\n      submitting: false,\n      tips: {}\n    });\n\n    _defineProperty(this, \"login\", async () => {\n      const {\n        checkAuth,\n        submitting\n      } = this.props;\n      const {\n        email,\n        password\n      } = this.state;\n\n      if (submitting) {\n        return false;\n      }\n\n      if (email.length === 0 && password.length === 0) {\n        return false;\n      }\n\n      this.setState({\n        submitting: true\n      });\n      const tips = {};\n      const response = await axios({\n        url: config.api.host + \"/auth\",\n        method: \"POST\",\n        data: {\n          email,\n          password\n        },\n        withCredentials: true\n      });\n      this.setState({\n        submitting: false\n      });\n\n      if (!response.data.error) {\n        await checkAuth();\n        Router.pushRoute(\"dashboard\");\n      } else {\n        if (response.data.error === \"not_registered\") {\n          tips.email = \"Seems like you have the wrong email?\";\n        }\n\n        if (response.data.error === \"incorrect_password\") {\n          tips.password = \"You've got the password wrong\";\n        }\n\n        if (response.data.error === \"not_verified\") {\n          tips.email = \"Looks like you haven't confirmed your email...\";\n        }\n      }\n\n      this.setState({\n        tips\n      });\n      console.log(response);\n    });\n\n    _defineProperty(this, \"onChangeEmail\", ev => {\n      this.setState({\n        email: ev.target.value\n      });\n    });\n\n    _defineProperty(this, \"onChangePassword\", ev => {\n      this.setState({\n        password: ev.target.value\n      });\n    });\n\n    _defineProperty(this, \"onKeyDown\", event => {\n      if (event && event.key === \"Enter\") {\n        event.preventDefault();\n        event.stopPropagation();\n        this.login();\n      }\n    });\n  }\n\n  render() {\n    const {\n      auth,\n      user,\n      isTouch\n    } = this.props;\n\n    if (auth) {\n      Router.pushRoute(\"dashboard\");\n    }\n\n    const {\n      email,\n      password,\n      submitting,\n      tips\n    } = this.state;\n    return __jsx(Layout, {\n      auth: auth,\n      user: user,\n      isTouch: isTouch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, __jsx(\"title\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Login - Jaresume\")), isTouch && __jsx(TouchLogin, {\n      email: email,\n      password: password,\n      submitting: submitting,\n      tips: tips,\n      onChangeEmail: this.onChangeEmail,\n      onChangePassword: this.onChangePassword,\n      login: this.login,\n      onKeyDown: this.onKeyDown,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), !isTouch && __jsx(LoginContainer, {\n      onKeyDown: this.onKeyDown,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, __jsx(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), __jsx(Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Login\"), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), __jsx(Input, {\n      label: \"Email\",\n      subLabel: tips.email,\n      type: \"email\",\n      onChange: this.onChangeEmail,\n      value: email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), __jsx(Input, {\n      type: \"password\",\n      label: \"Password\",\n      subLabel: tips.password,\n      onChange: this.onChangePassword,\n      value: password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), __jsx(Button, {\n      disabled: submitting,\n      onClick: this.login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Login\")), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Don't have an account? \", __jsx(Link, {\n      href: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"signup\")), __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Forgot your password? \", __jsx(Link, {\n      to: \"forgot_password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"reset\"))));\n  }\n\n}","map":{"version":3,"sources":["/home/roland/repos/learn2spell-app/pages/login.js"],"names":["Component","styled","axios","Head","Router","Link","Layout","Input","Button","Title","Body","config","TouchLogin","LoginContainer","div","Signup","email","password","passwordVerification","submitting","tips","checkAuth","props","state","length","setState","response","url","api","host","method","data","withCredentials","error","pushRoute","console","log","ev","target","value","event","key","preventDefault","stopPropagation","login","render","auth","user","isTouch","onChangeEmail","onChangePassword","onKeyDown"],"mappings":";;;;;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,SAASC,MAAT,QAAuB,WAAvB;AACA,SAASC,IAAT,QAAqB,oBAArB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,KAAT,EAAgBC,IAAhB,QAA4B,oBAA5B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,UAAT,QAA2B,qBAA3B;AAEA,MAAMC,cAAc,GAAGZ,MAAM,CAACa,GAAI;;;;CAAlC;AAMA,eAAe,MAAMC,MAAN,SAAqBf,SAArB,CAA+B;AAAA;AAAA;;AAAA,mCACpC;AACNgB,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,oBAAoB,EAAE,EAHhB;AAINC,MAAAA,UAAU,EAAE,KAJN;AAKNC,MAAAA,IAAI,EAAE;AALA,KADoC;;AAAA,mCAQpC,YAAY;AAClB,YAAM;AAAEC,QAAAA,SAAF;AAAaF,QAAAA;AAAb,UAA4B,KAAKG,KAAvC;AACA,YAAM;AAAEN,QAAAA,KAAF;AAASC,QAAAA;AAAT,UAAsB,KAAKM,KAAjC;;AACA,UAAIJ,UAAJ,EAAgB;AACd,eAAO,KAAP;AACD;;AACD,UAAIH,KAAK,CAACQ,MAAN,KAAiB,CAAjB,IAAsBP,QAAQ,CAACO,MAAT,KAAoB,CAA9C,EAAiD;AAC/C,eAAO,KAAP;AACD;;AACD,WAAKC,QAAL,CAAc;AAAEN,QAAAA,UAAU,EAAE;AAAd,OAAd;AACA,YAAMC,IAAI,GAAG,EAAb;AACA,YAAMM,QAAQ,GAAG,MAAMxB,KAAK,CAAC;AAC3ByB,QAAAA,GAAG,EAAEhB,MAAM,CAACiB,GAAP,CAAWC,IAAX,GAAkB,OADI;AAE3BC,QAAAA,MAAM,EAAE,MAFmB;AAG3BC,QAAAA,IAAI,EAAE;AAAEf,UAAAA,KAAF;AAASC,UAAAA;AAAT,SAHqB;AAI3Be,QAAAA,eAAe,EAAE;AAJU,OAAD,CAA5B;AAMA,WAAKP,QAAL,CAAc;AAAEN,QAAAA,UAAU,EAAE;AAAd,OAAd;;AACA,UAAI,CAACO,QAAQ,CAACK,IAAT,CAAcE,KAAnB,EAA0B;AACxB,cAAMZ,SAAS,EAAf;AACAjB,QAAAA,MAAM,CAAC8B,SAAP,CAAiB,WAAjB;AACD,OAHD,MAGO;AACL,YAAIR,QAAQ,CAACK,IAAT,CAAcE,KAAd,KAAwB,gBAA5B,EAA8C;AAC5Cb,UAAAA,IAAI,CAACJ,KAAL,GAAa,sCAAb;AACD;;AACD,YAAIU,QAAQ,CAACK,IAAT,CAAcE,KAAd,KAAwB,oBAA5B,EAAkD;AAChDb,UAAAA,IAAI,CAACH,QAAL,GAAgB,+BAAhB;AACD;;AACD,YAAIS,QAAQ,CAACK,IAAT,CAAcE,KAAd,KAAwB,cAA5B,EAA4C;AAC1Cb,UAAAA,IAAI,CAACJ,KAAL,GAAa,gDAAb;AACD;AACF;;AACD,WAAKS,QAAL,CAAc;AACZL,QAAAA;AADY,OAAd;AAGAe,MAAAA,OAAO,CAACC,GAAR,CAAYV,QAAZ;AACD,KA5C2C;;AAAA,2CA8C5BW,EAAE,IAAI;AACpB,WAAKZ,QAAL,CAAc;AAAET,QAAAA,KAAK,EAAEqB,EAAE,CAACC,MAAH,CAAUC;AAAnB,OAAd;AACD,KAhD2C;;AAAA,8CAiDzBF,EAAE,IAAI;AACvB,WAAKZ,QAAL,CAAc;AAAER,QAAAA,QAAQ,EAAEoB,EAAE,CAACC,MAAH,CAAUC;AAAtB,OAAd;AACD,KAnD2C;;AAAA,uCAoDhCC,KAAK,IAAI;AACnB,UAAIA,KAAK,IAAIA,KAAK,CAACC,GAAN,KAAc,OAA3B,EAAoC;AAClCD,QAAAA,KAAK,CAACE,cAAN;AACAF,QAAAA,KAAK,CAACG,eAAN;AACA,aAAKC,KAAL;AACD;AACF,KA1D2C;AAAA;;AA2D5CC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA,IAAR;AAAcC,MAAAA;AAAd,QAA0B,KAAK1B,KAArC;;AAEA,QAAIwB,IAAJ,EAAU;AACR1C,MAAAA,MAAM,CAAC8B,SAAP,CAAiB,WAAjB;AACD;;AAED,UAAM;AAAElB,MAAAA,KAAF;AAASC,MAAAA,QAAT;AAAmBE,MAAAA,UAAnB;AAA+BC,MAAAA;AAA/B,QAAwC,KAAKG,KAAnD;AACA,WACE,MAAC,MAAD;AAAQ,MAAA,IAAI,EAAEuB,IAAd;AAAoB,MAAA,IAAI,EAAEC,IAA1B;AAAgC,MAAA,OAAO,EAAEC,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,CADF,EAIGA,OAAO,IACN,MAAC,UAAD;AACE,MAAA,KAAK,EAAEhC,KADT;AAEE,MAAA,QAAQ,EAAEC,QAFZ;AAGE,MAAA,UAAU,EAAEE,UAHd;AAIE,MAAA,IAAI,EAAEC,IAJR;AAKE,MAAA,aAAa,EAAE,KAAK6B,aALtB;AAME,MAAA,gBAAgB,EAAE,KAAKC,gBANzB;AAOE,MAAA,KAAK,EAAE,KAAKN,KAPd;AAQE,MAAA,SAAS,EAAE,KAAKO,SARlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,EAgBG,CAACH,OAAD,IACC,MAAC,cAAD;AAAgB,MAAA,SAAS,EAAE,KAAKG,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,EAME,MAAC,KAAD;AACE,MAAA,KAAK,EAAC,OADR;AAEE,MAAA,QAAQ,EAAE/B,IAAI,CAACJ,KAFjB;AAGE,MAAA,IAAI,EAAC,OAHP;AAIE,MAAA,QAAQ,EAAE,KAAKiC,aAJjB;AAKE,MAAA,KAAK,EAAEjC,KALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,EAaE,MAAC,KAAD;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,KAAK,EAAC,UAFR;AAGE,MAAA,QAAQ,EAAEI,IAAI,CAACH,QAHjB;AAIE,MAAA,QAAQ,EAAE,KAAKiC,gBAJjB;AAKE,MAAA,KAAK,EAAEjC,QALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,EAoBE,MAAC,MAAD;AAAQ,MAAA,QAAQ,EAAEE,UAAlB;AAA8B,MAAA,OAAO,EAAE,KAAKyB,KAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eApBF,CADF,EA0BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1BF,EA2BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCACyB,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADzB,CA3BF,EA8BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACwB,MAAC,IAAD;AAAM,MAAA,EAAE,EAAC,iBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADxB,CA9BF,CAjBJ,CADF;AAuDD;;AA1H2C","sourcesContent":["import { Component } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport Head from \"next/head\";\n\nimport { Router } from \"../routes\";\nimport { Link } from \"../components/Link\";\nimport Layout from \"../components/Layout\";\nimport Input from \"../components/Input\";\nimport Button from \"../components/Button\";\nimport { Title, Body } from \"../components/Text\";\nimport config from \"../config\";\nimport { TouchLogin } from \"../components/Login\";\n\nconst LoginContainer = styled.div`\n  margin: auto;\n  width: 500px;\n  padding-top: 80px;\n`;\n\nexport default class Signup extends Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    passwordVerification: \"\",\n    submitting: false,\n    tips: {}\n  };\n  login = async () => {\n    const { checkAuth, submitting } = this.props;\n    const { email, password } = this.state;\n    if (submitting) {\n      return false;\n    }\n    if (email.length === 0 && password.length === 0) {\n      return false;\n    }\n    this.setState({ submitting: true });\n    const tips = {};\n    const response = await axios({\n      url: config.api.host + \"/auth\",\n      method: \"POST\",\n      data: { email, password },\n      withCredentials: true\n    });\n    this.setState({ submitting: false });\n    if (!response.data.error) {\n      await checkAuth();\n      Router.pushRoute(\"dashboard\");\n    } else {\n      if (response.data.error === \"not_registered\") {\n        tips.email = \"Seems like you have the wrong email?\";\n      }\n      if (response.data.error === \"incorrect_password\") {\n        tips.password = \"You've got the password wrong\";\n      }\n      if (response.data.error === \"not_verified\") {\n        tips.email = \"Looks like you haven't confirmed your email...\";\n      }\n    }\n    this.setState({\n      tips\n    });\n    console.log(response);\n  };\n\n  onChangeEmail = ev => {\n    this.setState({ email: ev.target.value });\n  };\n  onChangePassword = ev => {\n    this.setState({ password: ev.target.value });\n  };\n  onKeyDown = event => {\n    if (event && event.key === \"Enter\") {\n      event.preventDefault();\n      event.stopPropagation();\n      this.login();\n    }\n  };\n  render() {\n    const { auth, user, isTouch } = this.props;\n\n    if (auth) {\n      Router.pushRoute(\"dashboard\");\n    }\n\n    const { email, password, submitting, tips } = this.state;\n    return (\n      <Layout auth={auth} user={user} isTouch={isTouch}>\n        <Head>\n          <title>Login - Jaresume</title>\n        </Head>\n        {isTouch && (\n          <TouchLogin\n            email={email}\n            password={password}\n            submitting={submitting}\n            tips={tips}\n            onChangeEmail={this.onChangeEmail}\n            onChangePassword={this.onChangePassword}\n            login={this.login}\n            onKeyDown={this.onKeyDown}\n          />\n        )}\n        {!isTouch && (\n          <LoginContainer onKeyDown={this.onKeyDown}>\n            <form>\n              <br />\n              <br />\n              <Title>Login</Title>\n              <br />\n              <br />\n              <Input\n                label=\"Email\"\n                subLabel={tips.email}\n                type=\"email\"\n                onChange={this.onChangeEmail}\n                value={email}\n              />\n              <Input\n                type=\"password\"\n                label=\"Password\"\n                subLabel={tips.password}\n                onChange={this.onChangePassword}\n                value={password}\n              />\n              <Button disabled={submitting} onClick={this.login}>\n                Login\n              </Button>\n            </form>\n\n            <br />\n            <p>\n              Don't have an account? <Link href=\"/signup\">signup</Link>\n            </p>\n            <p>\n              Forgot your password? <Link to=\"forgot_password\">reset</Link>\n            </p>\n          </LoginContainer>\n        )}\n      </Layout>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}